generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// --- Coaching Platform Enums ---

enum ExperienceLevel {
  beginner
  intermediate
  advanced
}

enum PrescriptionType {
  percentage
  rpe
  rir
  velocity
  autoregulated
  fixed
}

enum WeightUnit {
  kg
  lbs
}

enum ProgramType {
  individual
  template
  group
}

enum PeriodizationType {
  block
  dup
  linear
  rpe_based
  hybrid
}

// --- Existing Models ---

model Submission {
  id             String   @id @default(uuid())
  generatedAt    DateTime
  trainerProfile Json
  sections       Json
  rawAnswers     Json
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
}

// --- Coaching Platform Models ---

model Coach {
  id        String   @id @default(uuid())
  name      String
  email     String   @unique
  brandName String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  athletes Athlete[]
}

model Athlete {
  id              String          @id @default(uuid())
  coachId         String
  name            String
  email           String?
  bodyweight      Float?
  weightClass     String?
  experienceLevel ExperienceLevel @default(intermediate)
  isRemote        Boolean         @default(true)
  isCompetitor    Boolean         @default(false)
  federation      String?
  notes           String?         @db.Text
  metadata        Json?
  createdAt       DateTime        @default(now())
  updatedAt       DateTime        @updatedAt

  coach Coach @relation(fields: [coachId], references: [id])
}
